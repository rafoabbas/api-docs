# Configuration

Publish the config file:

```bash
php artisan vendor:publish --tag=api-docs-config
```

This creates `config/api-docs.php`.

## Full Configuration

```php
<?php

return [
    /*
    |--------------------------------------------------------------------------
    | Exclude Prefixes
    |--------------------------------------------------------------------------
    |
    | Route prefixes to exclude from documentation.
    | Routes starting with these prefixes will be ignored.
    |
    */
    'exclude_prefixes' => [
        '_',
        'sanctum',
        'telescope',
        'horizon',
        'storage',
        'mcp',
    ],

    /*
    |--------------------------------------------------------------------------
    | Custom Variables
    |--------------------------------------------------------------------------
    |
    | Collection-level variables included in Postman collection.
    | These are available to all requests via {{VARIABLE_NAME}} syntax.
    |
    */
    'variables' => [
        'API_URL' => 'https://api.example.com',
        'API_URL_V1' => 'https://api.example.com/v1',
        'BEARER_TOKEN' => '',
        'PHONE' => '905551234567',
    ],

    /*
    |--------------------------------------------------------------------------
    | Postman Environments
    |--------------------------------------------------------------------------
    |
    | Define multiple environments for different stages.
    | Each generates a separate .postman_environment.json file.
    |
    */
    'environments' => [
        'local' => [
            'API_URL' => env('API_URL', 'http://localhost'),
            'BEARER_TOKEN' => '',
        ],
        'staging' => [
            'API_URL' => 'https://staging-api.example.com',
            'BEARER_TOKEN' => '',
        ],
        'production' => [
            'API_URL' => 'https://api.example.com',
            'BEARER_TOKEN' => '',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Default Headers
    |--------------------------------------------------------------------------
    |
    | Headers automatically added to all requests.
    |
    */
    'default_headers' => [
        'Accept' => 'application/json',
        'Content-Type' => 'application/json',
    ],

    /*
    |--------------------------------------------------------------------------
    | YAML Configuration
    |--------------------------------------------------------------------------
    |
    | Path to YAML files containing API definitions.
    | Files are merged with PHP attribute definitions.
    | Attributes take priority over YAML.
    |
    */
    'yaml_path' => resource_path('api-docs'),

    /*
    |--------------------------------------------------------------------------
    | OpenAPI Configuration
    |--------------------------------------------------------------------------
    |
    | Settings for OpenAPI 3.x specification output.
    |
    */
    'openapi' => [
        // API title
        'title' => env('APP_NAME', 'API Documentation'),

        // API version (semver recommended)
        'version' => '1.0.0',

        // API description
        'description' => 'API documentation generated by ApiDocs',

        // Server URLs
        'servers' => [
            ['url' => 'https://api.example.com', 'description' => 'Production'],
            ['url' => 'https://staging-api.example.com', 'description' => 'Staging'],
        ],

        // Output format: 'yaml' or 'json'
        'output_format' => 'yaml',
    ],

    /*
    |--------------------------------------------------------------------------
    | Output Configuration
    |--------------------------------------------------------------------------
    |
    | Default output paths for generated files.
    |
    */
    'output' => [
        'postman_path' => base_path('docs/postman'),
        'openapi_path' => base_path('docs/openapi'),
    ],
];
```

## Configuration Options

### exclude_prefixes

Array of route prefixes to exclude. Any route URI starting with these prefixes will be skipped.

```php
'exclude_prefixes' => ['_', 'sanctum', 'admin', 'internal'],
```

You can also exclude via command:
```bash
php artisan api:generate --exclude=admin --exclude=internal
```

### variables

Collection-level Postman variables. Available in all requests using `{{VARIABLE}}` syntax.

```php
'variables' => [
    'API_URL' => 'https://api.example.com',
    'USER_EMAIL' => 'test@example.com',
],
```

### environments

Generate separate Postman environment files for different stages.

```php
'environments' => [
    'local' => [
        'API_URL' => 'http://localhost:8000',
    ],
    'production' => [
        'API_URL' => 'https://api.example.com',
    ],
],
```

Output:
```
docs/postman/
├── {timestamp}-collection.json
├── {timestamp}-local.postman_environment.json
└── {timestamp}-production.postman_environment.json
```

### default_headers

Headers added to every request automatically.

```php
'default_headers' => [
    'Accept' => 'application/json',
    'Content-Type' => 'application/json',
    'X-Requested-With' => 'XMLHttpRequest',
],
```

### yaml_path

Directory containing YAML API definition files.

```php
'yaml_path' => resource_path('api-docs'),  // resources/api-docs/
```

### openapi

OpenAPI specification settings.

```php
'openapi' => [
    'title' => 'My API',
    'version' => '2.0.0',
    'description' => 'Complete API documentation',
    'servers' => [
        ['url' => 'https://api.example.com', 'description' => 'Production'],
    ],
    'output_format' => 'yaml',  // or 'json'
],
```

### output

Output directories for generated files.

```php
'output' => [
    'postman_path' => base_path('docs/postman'),
    'openapi_path' => base_path('docs/openapi'),
],
```

## Command Options

Override config values via command line:

```bash
# Output format
php artisan api:generate --format=postman     # Only Postman
php artisan api:generate --format=openapi     # Only OpenAPI
php artisan api:generate --format=both        # Both (default)

# Custom output directory
php artisan api:generate --output=api-docs

# Custom collection name
php artisan api:generate --name="My API v2"

# OpenAPI format
php artisan api:generate --openapi-format=json

# Custom YAML path
php artisan api:generate --yaml=resources/api

# Additional exclusions
php artisan api:generate --exclude=admin --exclude=debug
```